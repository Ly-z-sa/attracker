<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendance Tracker</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='45' fill='%233182ce'/%3E%3Cpath d='M30 35h40v5H30zm0 10h40v5H30zm0 10h30v5H30z' fill='white'/%3E%3Ccircle cx='75' cy='25' r='8' fill='%2310b981'/%3E%3C/svg%3E">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <div class="logo">
                <h1>AttendanceTracker</h1>
            </div>
            <nav class="nav">
                <a href="#" class="nav-link active" onclick="showTab('dashboard')">Dashboard</a>
                <a href="#" class="nav-link" onclick="showTab('subjects')">Add Subject</a>
                <a href="#" class="nav-link" onclick="showTab('reports')">Reports</a>
                <a href="#" class="nav-link" onclick="showTab('account')">Account</a>
            </nav>
            <div class="header-actions">
                <button class="btn-icon" title="Toggle Dark Mode" onclick="toggleDarkMode()">
                    <svg id="darkModeIcon" width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"/>
                    </svg>
                </button>
                <div class="notification-container">
                    <button class="btn-icon" title="Notifications" onclick="showNotifications()">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"/>
                        </svg>
                        <span class="notification-badge">0</span>
                    </button>
                    <div id="notificationDropdown" class="notification-dropdown">
                        <div class="notification-header">
                            <h4>Notifications</h4>
                        </div>
                        <div id="notificationsList" class="notifications-list">
                            <!-- Notifications will be loaded here -->
                        </div>
                    </div>
                </div>
                <div class="user-menu">
                    <button class="user-avatar">
                        <span>JD</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Dashboard Tab -->
            <div id="dashboard-tab" class="tab-content active">
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-blue">
                            <svg width="24" height="24" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalSubjects">0</h3>
                            <p>Total Subjects</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-green">
                            <svg width="24" height="24" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <h3 id="presentCount">0</h3>
                            <p>Present Today</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-red">
                            <svg width="24" height="24" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <h3 id="absentCount">0</h3>
                            <p>Absent Today</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-yellow">
                            <svg width="24" height="24" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <h3 id="lateCount">0</h3>
                            <p>Late Today</p>
                        </div>
                    </div>
                </div>

                <!-- Subjects List -->
                <div class="section">
                    <div class="section-header">
                        <div class="section-title">
                            <h2>My Subjects</h2>
                            <p>Manage attendance for your subjects</p>
                        </div>
                        <div class="section-filters">
                            <div class="custom-dropdown" id="dayFilterDropdown">
                                <div class="dropdown-selected" onclick="toggleDayFilter()">
                                    <span id="selectedDay">All Days</span>
                                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"/>
                                    </svg>
                                </div>
                                <div class="dropdown-options" id="dayFilterOptions">
                                    <div class="dropdown-option" data-value="all" onclick="selectDay('all', 'All Days')">All Days</div>
                                    <div class="dropdown-option" data-value="monday" onclick="selectDay('monday', 'Monday')">Monday</div>
                                    <div class="dropdown-option" data-value="tuesday" onclick="selectDay('tuesday', 'Tuesday')">Tuesday</div>
                                    <div class="dropdown-option" data-value="wednesday" onclick="selectDay('wednesday', 'Wednesday')">Wednesday</div>
                                    <div class="dropdown-option" data-value="thursday" onclick="selectDay('thursday', 'Thursday')">Thursday</div>
                                    <div class="dropdown-option" data-value="friday" onclick="selectDay('friday', 'Friday')">Friday</div>
                                    <div class="dropdown-option" data-value="saturday" onclick="selectDay('saturday', 'Saturday')">Saturday</div>
                                    <div class="dropdown-option" data-value="sunday" onclick="selectDay('sunday', 'Sunday')">Sunday</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="subjectsList" class="subjects-grid">
                        <!-- Subjects will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Add Subject Tab -->
            <div id="subjects-tab" class="tab-content">
                <div class="section">
                    <div class="section-header">
                        <h2>Add New Subject</h2>
                        <p>Create a new subject to track attendance</p>
                    </div>
                    <div class="card">
                        <div class="form-group">
                            <label class="form-label">Subject Name</label>
                            <input type="text" id="subjectInput" placeholder="Enter subject name" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Days of the Week</label>
                            <div class="days-selector">
                                <label class="day-checkbox custom-checkbox">
                                    <input type="checkbox" value="monday" class="day-input">
                                    <span class="checkmark"></span>
                                    Monday
                                </label>
                                <label class="day-checkbox custom-checkbox">
                                    <input type="checkbox" value="tuesday" class="day-input">
                                    <span class="checkmark"></span>
                                    Tuesday
                                </label>
                                <label class="day-checkbox custom-checkbox">
                                    <input type="checkbox" value="wednesday" class="day-input">
                                    <span class="checkmark"></span>
                                    Wednesday
                                </label>
                                <label class="day-checkbox custom-checkbox">
                                    <input type="checkbox" value="thursday" class="day-input">
                                    <span class="checkmark"></span>
                                    Thursday
                                </label>
                                <label class="day-checkbox custom-checkbox">
                                    <input type="checkbox" value="friday" class="day-input">
                                    <span class="checkmark"></span>
                                    Friday
                                </label>
                                <label class="day-checkbox custom-checkbox">
                                    <input type="checkbox" value="saturday" class="day-input">
                                    <span class="checkmark"></span>
                                    Saturday
                                </label>
                                <label class="day-checkbox custom-checkbox">
                                    <input type="checkbox" value="sunday" class="day-input">
                                    <span class="checkmark"></span>
                                    Sunday
                                </label>
                            </div>
                        </div>
                        <button onclick="addSubject()" class="btn btn-primary">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z"/>
                            </svg>
                            Add Subject
                        </button>
                    </div>
                </div>
            </div>

            <!-- Reports Tab -->
            <div id="reports-tab" class="tab-content">
                <div class="section">
                    <div class="section-header">
                        <h2>Attendance Reports</h2>
                        <p>View detailed attendance statistics and reports</p>
                    </div>
                    <div class="reports-grid">
                        <div class="card">
                            <h3>Weekly Report</h3>
                            <div id="weeklyReport" class="report-content">
                                <!-- Weekly report will be loaded here -->
                            </div>
                        </div>
                        <div class="card">
                            <h3>Monthly Summary</h3>
                            <div id="monthlyReport" class="report-content">
                                <!-- Monthly report will be loaded here -->
                            </div>
                        </div>
                        <div class="card">
                            <h3>Subject Performance</h3>
                            <div id="subjectReport" class="report-content">
                                <!-- Subject performance will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Account Tab -->
            <div id="account-tab" class="tab-content">
                <div class="section">
                    <div class="section-header">
                        <h2>Account Settings</h2>
                        <p>Manage your profile and preferences</p>
                    </div>
                    <div class="account-grid">
                        <div class="card">
                            <h3>Profile Information</h3>
                            <div class="form-group">
                                <label class="form-label">Full Name</label>
                                <input type="text" class="form-input" id="fullName">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Email</label>
                                <input type="email" class="form-input" id="email">
                            </div>
                            <button class="btn btn-primary" onclick="updateProfile()">Update Profile</button>
                        </div>
                        <div class="card">
                            <h3>Preferences</h3>
                            <div class="form-group">
                                <label class="form-label">Default View</label>
                                <div class="custom-dropdown" id="defaultViewDropdown">
                                    <div class="dropdown-selected" onclick="toggleDefaultView()">
                                        <span id="selectedDefaultView">Dashboard</span>
                                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"/>
                                        </svg>
                                    </div>
                                    <div class="dropdown-options" id="defaultViewOptions">
                                        <div class="dropdown-option" onclick="selectDefaultView('dashboard', 'Dashboard')">Dashboard</div>
                                        <div class="dropdown-option" onclick="selectDefaultView('subjects', 'Subjects')">Subjects</div>
                                        <div class="dropdown-option" onclick="selectDefaultView('reports', 'Reports')">Reports</div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Notifications</label>
                                <div class="checkbox-group">
                                    <label class="custom-checkbox">
                                        <input type="checkbox" checked>
                                        <span class="checkmark"></span>
                                        Email notifications
                                    </label>
                                    <label class="custom-checkbox">
                                        <input type="checkbox">
                                        <span class="checkmark"></span>
                                        SMS reminders
                                    </label>
                                </div>
                            </div>
                            <button class="btn btn-primary">Save Preferences</button>
                        </div>
                        <div class="card">
                            <h3>Data Management</h3>
                            <p>Export or backup your attendance data</p>
                            <div class="button-group">
                                <button class="btn btn-secondary">Export Data</button>
                                <button class="btn btn-secondary">Backup Data</button>
                                <button class="btn btn-danger">Clear All Data</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal for Attendance -->
    <div id="attendanceModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Mark Attendance</h3>
                <button onclick="closeModal()" class="modal-close">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Date</label>
                    <div class="date-navigator">
                        <button type="button" onclick="navigateDate(-1)" class="btn btn-secondary btn-icon-only">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"/>
                            </svg>
                        </button>
                        <div class="date-display">
                            <span id="selectedDate"></span>
                            <small id="selectedDay"></small>
                        </div>
                        <button type="button" onclick="navigateDate(1)" class="btn btn-secondary btn-icon-only">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Status</label>
                    <div class="custom-dropdown" id="statusDropdown">
                        <div class="dropdown-selected" onclick="toggleStatusDropdown()">
                            <span id="selectedStatus">Present</span>
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"/>
                            </svg>
                        </div>
                        <div class="dropdown-options" id="statusOptions">
                            <div class="dropdown-option" data-value="present" onclick="selectStatus('present', 'Present')">
                                <div class="status-indicator present"></div>
                                <span>Present</span>
                            </div>
                            <div class="dropdown-option" data-value="absent" onclick="selectStatus('absent', 'Absent')">
                                <div class="status-indicator absent"></div>
                                <span>Absent</span>
                            </div>
                            <div class="dropdown-option" data-value="permission" onclick="selectStatus('permission', 'Permission')">
                                <div class="status-indicator permission"></div>
                                <span>Permission</span>
                            </div>
                            <div class="dropdown-option" data-value="late" onclick="selectStatus('late', 'Late')">
                                <div class="status-indicator late"></div>
                                <span>Late</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal()" class="btn btn-secondary">
                    Cancel
                </button>
                <button onclick="saveAttendance()" class="btn btn-primary">
                    Save Attendance
                </button>
            </div>
        </div>
    </div>

    <!-- Modal for Edit Subject -->
    <div id="editSubjectModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Edit Subject</h3>
                <button onclick="closeEditModal()" class="modal-close">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Subject Name</label>
                    <input type="text" id="editSubjectName" class="form-input">
                </div>
                <div class="form-group">
                    <label class="form-label">Days of the Week</label>
                    <div class="days-selector">
                        <label class="day-checkbox custom-checkbox">
                            <input type="checkbox" value="monday" class="edit-day-input">
                            <span class="checkmark"></span>
                            Monday
                        </label>
                        <label class="day-checkbox custom-checkbox">
                            <input type="checkbox" value="tuesday" class="edit-day-input">
                            <span class="checkmark"></span>
                            Tuesday
                        </label>
                        <label class="day-checkbox custom-checkbox">
                            <input type="checkbox" value="wednesday" class="edit-day-input">
                            <span class="checkmark"></span>
                            Wednesday
                        </label>
                        <label class="day-checkbox custom-checkbox">
                            <input type="checkbox" value="thursday" class="edit-day-input">
                            <span class="checkmark"></span>
                            Thursday
                        </label>
                        <label class="day-checkbox custom-checkbox">
                            <input type="checkbox" value="friday" class="edit-day-input">
                            <span class="checkmark"></span>
                            Friday
                        </label>
                        <label class="day-checkbox custom-checkbox">
                            <input type="checkbox" value="saturday" class="edit-day-input">
                            <span class="checkmark"></span>
                            Saturday
                        </label>
                        <label class="day-checkbox custom-checkbox">
                            <input type="checkbox" value="sunday" class="edit-day-input">
                            <span class="checkmark"></span>
                            Sunday
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="closeEditModal()" class="btn btn-secondary">
                    Cancel
                </button>
                <button onclick="saveEditSubject()" class="btn btn-primary">
                    Save Changes
                </button>
            </div>
        </div>
    </div>

    <script src="js/firebase-config.js"></script>
    <script src="js/app.js"></script>
</body>
</html>